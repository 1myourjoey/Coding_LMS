CREATE TABLE `user` (
`user_no`	int	NOT NULL,
`login_id`	VARCHAR(50)	NULL,
`pw`	VARCHAR(50)	NULL,
`user_name`	VARCHAR(50)	NULL,
`admin_yn`	VARCHAR(2)	NULL,
`email`	VARCHAR(50)	NULL
);

CREATE TABLE `contents_manage` (
`con_num`	varchar(50)	NOT NULL,
`lec_num`	varchar(50)	NOT NULL,
`con_name`	varchar(50)	NULL,
`description`	text	NULL,
`video_id`	varchar(50)	NULL,
`con_play_time`	varchar(50)	NULL,
`lec_name`	varchar(50)	NULL,
`thumb_url`	varchar(200)	NULL
);

CREATE TABLE `chapter` (
`chap_num`	int	NOT NULL,
`con_num`	varchar(50)	NOT NULL,
`lec_num`	varchar(50)	NOT NULL,
`chap_name`	varchar(50)	NULL,
`chap_start_time`	varchar(50)	NULL
);

CREATE TABLE `lecture_info` (
`lec_num`	varchar(50)	NOT NULL,
`lec_start_date`	datetime	NULL,
`lec_end_date`	datetime	NULL,
`lec_name`	varchar(50)	NULL,
`lec_ex`	text	NULL
);

CREATE TABLE `sugang_reg` (
`lec_num`	varchar(50)	NOT NULL,
`user_no`	int	NOT NULL,
`lec_sub_date`	datetime	NULL,
`complete_yn`	VARCHAR(2)	NULL
);

CREATE TABLE `section_progress` (
`con_num`	varchar(50)	NOT NULL,
`user_no`	int	NOT NULL,
`lec_num`	varchar(50)	NOT NULL,
`learning_time`	varchar(50)	NULL,
`fnl_s`	varchar(50)	NULL,
`max_s`	varchar(50)	NULL
);

CREATE TABLE `board` (
`board_Idx`	int	NOT NULL,
`user_no`	int	NOT NULL,
`title`	text	NULL,
`contents`	varchar(255)	NULL,
`hit_cnt`	int	NULL,
`created_datetime`	datetime	NULL,
`updated_datetime`	datetime	NULL
);

CREATE TABLE `qna` (
`q_num`	int	NOT NULL,
`user_no`	int	NOT NULL,
`qna_title`	varchar(255)	NULL,
`qna_contents`	text	NULL,
`qna_created`	datetime	NULL,
`qna_update`	datetime	NULL,
`hit_cnt`	int	NULL
);

CREATE TABLE `board_file` (
`idx`	int	NOT NULL,
`board_Idx`	int	NOT NULL,
`file_size`	bigint	NULL,
`original_file_name`	varchar(255)	NULL,
`stored_file_path`	varchar(255)	NULL
);

CREATE TABLE `comment` (
`comment_num`	int	NOT NULL,
`q_num`	int	NOT NULL,
`user_no`	int	NOT NULL,
`p_comment_num`	int	NOT NULL,
`comment_contents`	varchar(255)	NULL,
`comment_created`	datetime	NULL,
`comment_update`	datetime	NULL
);

CREATE TABLE `post` (
`post_num`	int	NOT NULL,
`user_no`	int	NOT NULL,
`post_title`	varchar(255)	NULL,
`post_contents`	text	NULL,
`post_created`	datetime	NULL,
`hit_cnt`	int	NULL
);

ALTER TABLE `user` ADD CONSTRAINT `PK_USER` PRIMARY KEY (
`user_no`
);

ALTER TABLE `contents_manage` ADD CONSTRAINT `PK_CONTENTS_MANAGE` PRIMARY KEY (
`con_num`,
`lec_num`
);

ALTER TABLE `chapter` ADD CONSTRAINT `PK_CHAPTER` PRIMARY KEY (
`chap_num`,
`con_num`,
`lec_num`
);

ALTER TABLE `lecture_info` ADD CONSTRAINT `PK_LECTURE_INFO` PRIMARY KEY (
`lec_num`
);

ALTER TABLE `sugang_reg` ADD CONSTRAINT `PK_SUGANG_REG` PRIMARY KEY (
`lec_num`,
`user_no`
);

ALTER TABLE `section_progress` ADD CONSTRAINT `PK_SECTION_PROGRESS` PRIMARY KEY (
`con_num`,
`user_no`,
`lec_num`
);

ALTER TABLE `board` ADD CONSTRAINT `PK_BOARD` PRIMARY KEY (
`board_Idx`
);

ALTER TABLE `qna` ADD CONSTRAINT `PK_QNA` PRIMARY KEY (
`q_num`
);

ALTER TABLE `board_file` ADD CONSTRAINT `PK_BOARD_FILE` PRIMARY KEY (
`idx`
);

ALTER TABLE `comment` ADD CONSTRAINT `PK_COMMENT` PRIMARY KEY (
`comment_num`,
`q_num`
);

ALTER TABLE `post` ADD CONSTRAINT `PK_POST` PRIMARY KEY (
`post_num`
);

ALTER TABLE `contents_manage` ADD CONSTRAINT `FK_lecture_info_TO_contents_manage_1` FOREIGN KEY (
`lec_num`
)
REFERENCES `lecture_info` (
`lec_num`
);

ALTER TABLE `chapter` ADD CONSTRAINT `FK_contents_manage_TO_chapter_1` FOREIGN KEY (
`con_num`
)
REFERENCES `contents_manage` (
`con_num`
);

ALTER TABLE `chapter` ADD CONSTRAINT `FK_contents_manage_TO_chapter_2` FOREIGN KEY (
`lec_num`
)
REFERENCES `contents_manage` (
`lec_num`
);

ALTER TABLE `sugang_reg` ADD CONSTRAINT `FK_lecture_info_TO_sugang_reg_1` FOREIGN KEY (
`lec_num`
)
REFERENCES `lecture_info` (
`lec_num`
);

ALTER TABLE `sugang_reg` ADD CONSTRAINT `FK_user_TO_sugang_reg_1` FOREIGN KEY (
`user_no`
)
REFERENCES `user` (
`user_no`
);

ALTER TABLE `section_progress` ADD CONSTRAINT `FK_contents_manage_TO_section_progress_1` FOREIGN KEY (
`con_num`
)
REFERENCES `contents_manage` (
`con_num`
);

ALTER TABLE `section_progress` ADD CONSTRAINT `FK_contents_manage_TO_section_progress_2` FOREIGN KEY (
`lec_num`
)
REFERENCES `contents_manage` (
`lec_num`
);

ALTER TABLE `section_progress` ADD CONSTRAINT `FK_user_TO_section_progress_1` FOREIGN KEY (
`user_no`
)
REFERENCES `user` (
`user_no`
);

ALTER TABLE `comment` ADD CONSTRAINT `FK_qna_TO_comment_1` FOREIGN KEY (
`q_num`
)
REFERENCES `qna` (
`q_num`
);